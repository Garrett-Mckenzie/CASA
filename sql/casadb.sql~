START TRANSACTION;
SET FOREIGN_KEY_CHECKS = 0;

/*
Table structure for table `dbevents`
*/
CREATE TABLE `dbevents` (
	`id` int NOT NULL AUTO_INCREMENT,
	`name` text,
	`startDate` char(10),
	`endDate` char(10), 
	`description` text,
	`completed` text,
	`location` text,
	PRIMARY KEY (`id`)
);

/*
Table structure for table `dbpersons`
*/
CREATE TABLE `dbpersons` (
	`id` varchar(256) NOT NULL,
	`name` text,
       	`password` text,
	`accessLevel` int,
	PRIMARY KEY (`id`)
);

/*
Table structure for table `donations`
*/
CREATE TABLE `donations` (
	`amount` DECIMAL(12,2),
	`id` int NOT NULL AUTO_INCREMENT,
	`reason` text,
	`date` char(10),
	`fee` DECIMAL(12,2),
	`thanked` int,
	`eventID` int DEFAULT NULL,
	`donorID` int DEFAULT NULL,
	PRIMARY KEY (`id`),
	FOREIGN KEY (`eventID`) REFERENCES dbevents(`id`),
	FOREIGN KEY (`donorID`) REFERENCES donors(`id`)
);

/*
Table structure for table `files`
*/
CREATE TABLE `files` (
	`filePath` varchar(256) NOT NULL,
	`linkToDrive` varchar(256) NOT NULL,
	PRIMARY KEY (`filePath`)
);

/*
Table structure for table `donors`
*/
CREATE TABLE `donors` (
	`id` int NOT NULL AUTO_INCREMENT,
	`first` varchar(30),
	`last` varchar(30),
	`email` varchar(100),
	`zip` varchar(30),
	`city` varchar(30),
	`state` varchar(30),
	`street` varchar(100),
	`phone` varchar(30),
	`gender` varchar(30),
	`notes` text,
	PRIMARY KEY (`id`)
);

/*
Table structure for table `reports`
*/
CREATE TABLE `reports` (
	`id` int NOT NULL AUTO_INCREMENT,
	`reportType` varchar(30),
	`dateRangeStart` char(10),
	`dateRangeEnd` char(10),
	`name` varchar(30),
	`filePath` varchar(256), 
	PRIMARY KEY (`id`),
	FOREIGN KEY (`filePath`) REFERENCES files(`filePath`)
);

/*
Table structure for table `emails`
*/
CREATE TABLE `emails` (
	`id` int NOT NULL AUTO_INCREMENT,
	`message` text,
	`purpose` text,
	PRIMARY KEY (`id`)
);

/*
Table structure for table `associations`
*/
CREATE TABLE `associations` (
	`eventID` int DEFAULT NULL,
	`donationID` int DEFAULT NULL,
	`donorID` int DEFAULT NULL,
	`emailID` int DEFAULT NULL,
	`filePath` varchar(256) DEFAULT NULL,
	FOREIGN KEY (`eventID`) REFERENCES dbevents(`id`),
	FOREIGN KEY (`donationID`) REFERENCES donations(`id`),
	FOREIGN KEY (`donorID`) REFERENCES donors(`id`),
	FOREIGN KEY (`emailID`) REFERENCES emails(`id`),
	FOREIGN KEY (`filePath`) REFERENCES files(`filePath`),
	PRIMARY KEY (`eventID`,`donationID`,`donorID`,`emailID`,`filePath`)
);

SET FOREIGN_KEY_CHECKS = 1;
COMMIT;
